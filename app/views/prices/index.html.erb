<h1>Pull&Bear Price Manager</h1>
<h5> <%= Time.now.localtime.strftime("%H:%M:%S") %> </h5>

<%= link_to 'Next price', next_path(:format => :json) %>
<%= link_to 'Delete all', delete_all_path, data: { confirm: 'Are you sure?' } %>

<%= render "randomize_form" %>

<table id="prices_list">
  <thead>
    <tr>
      <th>Type</th>
      <th>Time</th>
      <th></th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <% @prices.each do |price| %>
      <tr id="price_<%= price.id %>"  class="<%= price.enabled? ? 'enabled' : 'disabled' %> <%= price.type %> <%= "open" if price.open? %>">
        <td><%= pretty_print(price.type) %> </td>
        <td><%= price.time.localtime.strftime("%H:%M:%S") %></td>

        <td><%= link_to 'Edit', edit_price_path(price) if price.editable? %></td>
        <td><%= link_to 'Delete', price, method: :delete, data: { confirm: 'Are you sure?' } if price.editable? %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<style type="text/css">
.disabled{
  text-decoration: line-through;
  color:red;
}
.enabled.open{
  color: green;
  font-weight: bolder;
}
.enabled{
  color: gray;
}
</style>

<script type="text/javascript">
setTimeout(function(){
   window.location.reload(1);
}, 10000);
</script>